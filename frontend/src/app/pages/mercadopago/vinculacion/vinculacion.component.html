<div class="container">
  <div class="card">
    <div class="card-header">
      <h2>Conectar con MercadoPago</h2>
    </div>
    <div class="card-body">
      <!-- Mostrar info del usuario logueado -->
      <div class="user-info" *ngIf="userInfo">
        <p><strong>Usuario:</strong> {{ userInfo.fullName }}</p>
        <p><strong>Email:</strong> {{ userInfo.email }}</p>
      </div>

      <p>Para poder procesar pagos, necesitas conectar tu cuenta de MercadoPago.</p>
      
      <!-- Mostrar error si no hay token -->
      <div *ngIf="!hasValidAuth" class="alert alert-warning">
        <strong>⚠️ Atención:</strong> No tienes una sesión válida. Por favor, inicia sesión nuevamente.
        <button class="btn btn-link" (click)="redirectToLogin()">Ir a Login</button>
      </div>

      <!-- Formulario de conexión -->
      <div *ngIf="hasValidAuth">
        <button 
          class="btn btn-primary btn-lg"
          [disabled]="!canConnect || isConnecting"
          (click)="connectToMercadoPago()"
        >
          <span *ngIf="isConnecting" class="spinner"></span>
          {{ isConnecting ? 'Conectando...' : 'Conectar con MercadoPago' }}
        </button>
      </div>

      <div *ngIf="error" class="alert alert-danger mt-3">
        {{ error }}
      </div>
    </div>
  </div>
</div>